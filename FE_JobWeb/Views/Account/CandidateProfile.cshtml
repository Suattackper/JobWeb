@model Data_JobWeb.Entity.JobSeekerCandidateProfile
@using Data_JobWeb.Entity
@{
    ViewData["Title"] = "CandidateProfile";
    Layout = "~/Views/Shared/_LayoutRecuiter.cshtml";
}

<div id="content">
    <div class="content-admin-main">
        <div class="wt-admin-right-page-header clearfix">
            <h2>Thông tin hồ sơ</h2>
            <div class="breadcrumbs">
                <a href="@Url.Action("Index","Home")">Trang chủ</a><a href="@Url.Action("IndexCandidate","Home")">Dasboard</a><span>
                    Hồ sơ của
                    tôi
                </span>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-body wt-panel-body p-a20">
                <div class="twm-tabs-style-1">
                    <ul class="nav nav-tabs" id="myTab3" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#BasicInfo"
                                    type="button" role="tab">
                                Thông tin cá nhân
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#MyResume"
                                    type="button" role="tab">
                                Hồ sơ đính kèm
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#SocialMedia"
                                    type="button" role="tab">
                                Mạng xã hội
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#JobExperience"
                                    type="button" role="tab">
                                Kinh nghiệm làm việc
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#Education"
                                    type="button" role="tab">
                                Học vấn
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#Certificate"
                                    type="button" role="tab">
                                Chứng chỉ
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content" id="myTab3Content">
                        <div class="tab-pane fade show active" id="BasicInfo">
                            <form action="@Url.Action("CandidateProfile","Account", new {type = 1})" method="post" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="col-lg-12 col-md-12">
                                        <div class="form-group">
                                            <div class="dashboard-profile-pic">
                                                <div class="dashboard-profile-photo">
                                                    <img src="@Model.AvartarUrl" alt="" />
                                                    <div class="upload-btn-wrapper">
                                                        <div id="upload-image-grid"></div>
                                                        <button class="site-button button-sm">Upload Photo</button>
                                                        <input type="file" name="image" id="file-uploader"
                                                               accept=".jpg, .jpeg, .png" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-12 col-lg-12 col-md-12">
                                        <div class="form-group">
                                            <label for="candidateName" class="form-label">
                                                Họ tên <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <input class="form-control" name="fullname" type="text" value="@Model.Fullname" required
                                                       placeholder="Full Name" id="candidateName" />
                                                <i class="fs-input-icon fa feather-user"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-6 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="candidateEmail" class="form-label">
                                                Email <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <input class="form-control" name="email" type="email" value="@Model.Email" required
                                                       placeholder="hyf123@gmail.com" id="candidateEmail" />
                                                <i class="fs-input-icon fas feather-mail"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-6 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="candidateGender" class="form-label">
                                                Giới tính <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <select class="wt-select-box selectpicker" data-live-search="true" name="gender" required
                                                        title="" id="candidateGender" data-bv-field="size">
                                                    <option class="bs-title-option" value="">Giới tính</option>
                                                    @if(Model.Gender == "male")
                                                    {
                                                        <option value="male" selected>Nam</option>
                                                        <option value="female">Nữ</option>
                                                        <option value="other">Khác</option>
                                                    }
                                                    else if(Model.Gender == "female")
                                                    {
                                                        <option value="male">Nam</option>
                                                        <option value="female" selected>Nữ</option>
                                                        <option value="other">Khác</option>
                                                    }
                                                    else if (Model.Gender == "other")
                                                    {
                                                        <option value="male">Nam</option>
                                                        <option value="female">Nữ</option>
                                                        <option value="other" selected>Khác</option>
                                                    }
                                                    else
                                                    {
                                                        <option value="male" selected>Nam</option>
                                                        <option value="female">Nữ</option>
                                                        <option value="other">Khác</option>
                                                    }
                                                </select>
                                                <i class="fs-input-icon fa feather-users"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-6 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="candidateDob" class="form-label">
                                                Ngày sinh <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <input class="form-control datepicker" name="dob" value="@(Model.Dob?.ToString("dd/MM/yyyy"))" required
                                                       type="text" data-provide="datepicker" placeholder="dd/mm/yyyy"
                                                       id="candidateDob" />
                                                <i class="fs-input-icon fa feather-calendar"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-6 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="candidatePhoneNumber" class="form-label">
                                                Số điện thoại <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <input class="form-control" name="phone" value="@Model.PhoneNumb" required
                                                       type="text" placeholder="Phone Number"
                                                       id="candidatePhoneNumber" />
                                                <i class="fs-input-icon fa feather-phone"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!--Country-->
                                    <div class="col-xl-4 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="city" class="form-label">
                                                Tỉnh/ Thành phố <span class="required">*</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <select id="city" data-city="@Model.Province" name="city" class="form-select form-control" required>
                                                    <option value="">Chọn tỉnh/thành phố</option>
                                                </select>
                                                <i class="fs-input-icon fa fa-city"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!--District-->
                                    <div class="col-xl-4 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="district" class="form-label">
                                                Quận/ Huyện <span class="required"> *</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <select id="district" data-district="@Model.District" name="district" class="form-select form-control" required>
                                                    <option value="">Chọn quận/huyện</option>
                                                </select>
                                                <i class="fs-input-icon fa fa-map-marker-alt"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Ward -->
                                    <div class="col-xl-4 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="ward" class="form-label">Phường/ Xã <span class="required"> *</span></label>
                                            <div class="ls-inputicon-box">
                                                <select id="ward" data-ward="@Model.Ward" name="ward" class="form-select form-control" required>
                                                    <option value="">Chọn phường/xã</option>
                                                </select>
                                                <i class="fs-input-icon fa fa-map-marker-alt"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-12 col-lg-6 col-md-12">
                                        <div class="form-group">
                                            <label for="address" class="form-label">
                                                Địa chỉ <span class="required"> *</span>
                                            </label>
                                            <div class="ls-inputicon-box">
                                                <input class="form-control" name="address" id="address" type="text" value="@Model.AddressDetail" required
                                                       placeholder="Address" />
                                                <i class="fs-input-icon fa feather-home"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-lg-12 col-md-12">
                                        <div class="text-left">
                                            <button type="submit" class="site-button">Lưu thay đổi</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="tab-pane fade" id="MyResume">
                            <form action="@Url.Action("CandidateProfile","Account", new{type = 2})" method="post" enctype="multipart/form-data">
                                <div class="row">
                                    <div class="panel-heading wt-panel-heading">
                                        <h4 class="panel-tittle m-a0">
                                            <i class="fa fa-briefcase"></i> Quản lý CV
                                        </h4>
                                    </div>

                                    <div class="panel-body wt-panel-body m-b30">
                                        <div class="container-cv">
                                            @* <div class="cv-preview m-t15" id="cvPrevieww">
                                                <div class="cv-header">
                                                    <button><i class="feather-star"></i> Đặt làm CV chính</button>
                                                </div>

                                                <canvas id="pdfThumbnail" class="cv-thumbnail" style="display: none;"></canvas>
                                                <div id="wordIcon" class="cv-thumbnail" style="display: none; align-items: center; justify-content: center;">
                                                    <i class="fas fa-file-word" style="font-size: 100px; color: #007bff;"></i>
                                                </div>
                                                <div class="cv-footer">
                                                    <div class="file-info mb-2" onclick="openFilePreview()">
                                                        <span id="fileName">Thực_tập__net.pdf</span>
                                                    </div>
                                                    <small id="fileUpdateTime" style="color: #666;">
                                                        Cập nhật lần
                                                        cuối 15-11-2024 13:28 PM
                                                    </small>
                                                    <div class="actions mt-2">
                                                        <button onclick="alert('Tải xuống CV')"><i class="feather-download job-tag-urgent"></i></button>
                                                        <button onclick="alert('Chỉnh sửa')"><i class="feather-edit job-tag-pending"></i></button>
                                                        <button onclick="alert('Xóa')"><i class="feather-trash job-tag-danger"></i></button>
                                                    </div>
                                                </div>
                                            </div> *@

                                            @if (Model.CvUrl != null)
                                            {
                                                <iframe id="cviframe" style="align-items: center; justify-content: center; margin-top: 5px"
                                                        src="@Model.CvUrl#toolbar=0&view=FitH" width="212px" height="300px"
                                                        frameborder="0">
                                                </iframe>
                                                <a id="cvlink" href="@Model.CvUrl" target="_blank">
                                                    <i class="feather-download job-tag-urgent" style="margin: 10px"></i>
                                                </a>
                                            }
                                            else
                                            {
                                                <iframe id="cviframe" style="display: none; align-items: center; justify-content: center; margin-top: 5px"
                                                         width="212px" height="300px" frameborder="0">
                                                </iframe>
                                                <a id="cvlink" href="#" target="_blank" style="display: none;">
                                                    <i class="feather-download job-tag-urgent" style="margin: 10px"></i>
                                                </a>
                                            }

                                        </div>
                                        <button class="theme-btn theme-btn2 mt-3" type="button" onclick="document.getElementById('fileInput').click()">
                                            Tải CV
                                            lên
                                        </button>
                                        <input type="file" id="fileInput" name="profile" accept=".pdf" value="@Model.CvUrl" style="display: none;" onchange="handleFileUploadd(event)">
                                    </div>
                                    <div class="col-lg-12 col-md-12">
                                        <div class="text-left">
                                            <button type="submit" class="site-button">Lưu thay đổi</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Social Media -->
                        <div class="tab-pane fade" id="SocialMedia">
                            <div class="row">
                                <div class="panel-heading wt-panel-heading p-a20">
                                    <h4 class="panel-tittle m-a0">
                                        <i class="fa fa-globe"></i> Truyền thông và Mạng xã hội
                                    </h4>
                                </div>
                                <div class="panel-body wt-panel-body p-a20 m-b30">
                                    <form action="@Url.Action("CandidateProfile","Account", new{type = 3})" method="post">
                                        <div class="row">
                                            <div class="col-lg-4 col-md-6">
                                                <div class="form-group">
                                                    <label class="form-label"
                                                           for="candidateFacebooUrl">Facebook</label>
                                                    <div class="ls-inputicon-box">
                                                        <input class="form-control wt-form-control"
                                                               name="facebookurl" type="text" value="@Model.FacbookLink"
                                                               id="candidateFacebooUrl"/>
                                                        <i class="fs-input-icon fab fa-facebook-f"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6">
                                                <div class="form-group">
                                                    <label for="candidateLinkedinUrl"
                                                           class="form-label">
                                                        Linkedin
                                                    </label>
                                                    <div class="ls-inputicon-box">
                                                        <input class="form-control wt-form-control"
                                                               name="linkedinurl" type="text" value="@Model.LinkedinLink"
                                                               id="candidateLinkedinUrl"/>
                                                        <i class="fs-input-icon fab fa-linkedin-in"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6">
                                                <div class="form-group">
                                                    <label for="candidateWebsiteUrl"
                                                           class="form-label">Portfolio</label>
                                                    <div class="ls-inputicon-box">
                                                        <input class="form-control wt-form-control"
                                                               name="portfoliourl" type="text" value="@Model.PortfolioUrl"
                                                               id="candidateWebsiteUrl"/>
                                                        <i class="fs-input-icon fab fa-gg-circle"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6">
                                                <div class="form-group">
                                                    <label for="candidateTwitterUrl"
                                                           class="form-label">Twitter</label>
                                                    <div class="ls-inputicon-box">
                                                        <input class="form-control wt-form-control"
                                                               name="twitterurl" type="text" value="@Model.TwitterUrl"
                                                               id="candidateTwitterUrl"/>
                                                        <i class="fs-input-icon fab fa-twitter"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-4 col-md-6">
                                                <div class="form-group">
                                                    <label for="candidateGithubUrl"
                                                           class="form-label">Github</label>
                                                    <div class="ls-inputicon-box">
                                                        <input class="form-control wt-form-control"
                                                               name="githuburl" type="text" value="@Model.GithubUrl"
                                                               id="candidateGithubUrl" />
                                                        <i class="fs-input-icon fab fa-github-alt"></i>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-lg-12 col-md-12">
                                                <div class="text-left">
                                                    <button type="submit" class="site-button">
                                                        Save
                                                        Changes
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Job Experience -->
                        <div class="tab-pane fade" id="JobExperience">
                            <div class="panel-heading wt-panel-heading p-a20 panel-heading-with-btn">
                                <h4 class="panel-tittle m-a0">
                                    <i class="fa fa-suitcase"></i> Kinh nghiệm làm việc
                                </h4>
                                <a data-bs-toggle="modal" href="#JobExpModal" role="button" title="Add"
                                   class="site-text-primary">
                                    <span class="fa-2x feather-plus-circle"></span>
                                </a>
                            </div>

                            <div class="panel-body wt-panel-body p-a20">
                                <div class="twm-panel-inner">
                                    <ul class="timeline">
                                        @if (ViewBag.Experience != null && ViewBag.Experience.Count > 0)
                                        {
                                            foreach (JobSeekerWorkingExperience i in ViewBag.Experience)
                                            {
                                                <!-- Education Item 1 -->
                                                <li class="timeline-item">
                                                    <div class="icon">H</div>
                                                    <div class="content">
                                                        <span class="job-title">@i.JobTitle</span>
                                                        @if(i.EndDate != null)
                                                        {
                                                            <span class="job-duration">@i.StartDate - @i.EndDate</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="job-duration">@i.StartDate - Hiện tại</span>
                                                        }
                                                        <div class="actions">
                                                            <button class="btn" data-bs-toggle="modal" onclick="loadEditFormEx('@i.WorkingExpId', '@i.JobTitle', '@i.CompanyName', '@i.StartDate', '@i.EndDate', '@i.Description')"
                                                                    data-bs-target="#EditJobExpModal">
                                                                <i class="feather-edit"></i>
                                                            </button>
                                                            <a href="@Url.Action("DeleteExperience","Account",new{id = i.WorkingExpId})">
                                                                <button class="btn" data-bs-toggle="modal"
                                                                        data-bs-target="#delete-education-detail">
                                                                    <i class="feather-trash"></i>
                                                                </button>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="company-name">@i.CompanyName</div>

                                                    <p class="job-description">
                                                        @i.Description
                                                    </p>
                                                </li>
                                            }
                                        }
                                    </ul>
                                </div>
                            </div>

                            <div class="panel panel-default mb-3">
                                <div class="modal fade twm-saved-jobs-view" id="JobExpModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("AddCandidateProfileExperience","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Kinh nghiệm làm việc</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="jobExpTitle" class="form-label">
                                                                    Tên
                                                                    công việc <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="jobtitle" type="text" required
                                                                           placeholder="Job Name"
                                                                           id="jobExpTitle" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="jobExpCompanyName"
                                                                       class="form-label">
                                                                    Tên công ty/ Doanh nghiệp
                                                                    <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="companyname" type="text" required
                                                                           placeholder="Company Name"
                                                                           id="jobExpCompanyName" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--Start Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="startedDay">
                                                                    Bắt
                                                                    đầu từ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           id="startedDay"
                                                                           data-provide="datepicker"
                                                                           name="startday" type="text" required
                                                                           placeholder="dd/mm/yyyy" />
                                                                    <i class="fs-input-icon fa feather-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--End Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="endedDay">
                                                                    Kết
                                                                    thúc <span>
                                                                        (Để trống nếu đang còn
                                                                        làm)
                                                                    </span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           data-provide="datepicker" id="endedDay"
                                                                           name="endday" type="text"
                                                                           placeholder="dd/dd/yyyy" />
                                                                    <i class="fs-input-icon far fa-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="companydecription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!--Edit modal-->
                                <div class="modal fade twm-saved-jobs-view" id="EditJobExpModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("UpdateCandidateProfileExperience","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Kinh nghiệm làm việc</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <input type="hidden" id="editexid" name="id" />
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="jobExpTitle" class="form-label">
                                                                    Tên
                                                                    công việc <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="jobtitle" type="text" required
                                                                           placeholder="Job Name"
                                                                           id="editexjobtitle" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="jobExpCompanyName"
                                                                       class="form-label">
                                                                    Tên công ty/ Doanh nghiệp
                                                                    <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="companyname" type="text" required
                                                                           placeholder="Company Name"
                                                                           id="editexcompanyname" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--Start Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="startedDay">
                                                                    Bắt
                                                                    đầu từ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           id="editexstartday"
                                                                           data-provide="datepicker"
                                                                           name="startday" type="text" required
                                                                           placeholder="dd/mm/yyyy" />
                                                                    <i class="fs-input-icon fa feather-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--End Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="endedDay">
                                                                    Kết
                                                                    thúc <span>
                                                                        (Để trống nếu đang còn
                                                                        làm)
                                                                    </span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           data-provide="datepicker" id="editexendday"
                                                                           name="endday" type="text"
                                                                           placeholder="dd/dd/yyyy" />
                                                                    <i class="fs-input-icon far fa-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="editexdescription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Education -->
                        <div class="tab-pane fade" id="Education">
                            <div class="panel-heading wt-panel-heading p-a20 panel-heading-with-btn">
                                <h4 class="panel-tittle m-a0">
                                    <i class="fa fa-graduation-cap"></i> Học vấn
                                </h4>
                                <a data-bs-toggle="modal" href="#EducationModal" role="button" title="Add"
                                   class="site-text-primary">
                                    <span class="fa-2x feather-plus-circle"></span>
                                </a>
                            </div>

                            <div class="panel-body wt-panel-body p-a20">
                                <div class="twm-panel-inner">
                                    <ul class="timeline">
                                        @if (ViewBag.Education != null && ViewBag.Education.Count > 0)
                                        {
                                            foreach (JobSeekerEducationDetail i in ViewBag.Education)
                                            {
                                                <!-- Education Item 1 -->
                                                <li class="timeline-item">
                                                    <div class="icon">H</div>
                                                    <div class="content">
                                                        <span class="job-title">
                                                            @i.Major -
                                                            <span class="education_degree">@i.Degree</span>
                                                        </span>

                                                        @if (i.EndDate != null)
                                                        {
                                                            <span class="job-duration">@i.StartDate - @i.EndDate</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="job-duration">@i.StartDate - Hiện tại</span>
                                                        }
                                                        <div class="actions">
                                                            <button class="btn" data-bs-toggle="modal" onclick="loadEditFormEd('@i.EducationId', '@i.SchoolName', '@i.Major', '@i.Degree', '@i.StartDate', '@i.EndDate', '@i.Description')"
                                                                    data-bs-target="#EditEducationModal">
                                                                <i class="feather-edit"></i>
                                                            </button>
                                                            <a href="@Url.Action("DeleteEducation","Account",new{id = i.EducationId})">
                                                                <button class="btn" data-bs-toggle="modal"
                                                                        data-bs-target="#delete-education-detail">
                                                                    <i class="feather-trash"></i>
                                                                </button>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="company-name">@i.SchoolName</div>
                                                </li>
                                            }
                                        }
                                    </ul>
                                </div>
                            </div>

                            <div class="panel panel-default mb-3">
                                <div class="modal fade twm-saved-jobs-view" id="EducationModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("AddCandidateProfileEducation","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Học vấn</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateSchoolName"
                                                                       class="form-label">
                                                                    Tên trường <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="name" type="text" required
                                                                           placeholder="School Name"
                                                                           id="jobLevelTitle" />
                                                                    <i class="fs-input-icon fa fa-school"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-6 col-lg-6 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateMajor"
                                                                       class="form-label">
                                                                    Chuyên ngành <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="major" type="text" required
                                                                           placeholder="Major Name"
                                                                           id="jobLevelTitle" />
                                                                    <i class="fs-input-icon fa fa-school"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-6 col-lg-6 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateEducationDegree"
                                                                       class="form-label">
                                                                    Bằng cấp <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <select class="wt-select-box selectpicker" name="degree" required
                                                                            data-live-search="true" title=""
                                                                            id="candidateEducationDegree"
                                                                            data-bv-field="size">
                                                                        <option class="bs-title-option"
                                                                                value="">Bằng cấp</option>
                                                                        <option value="Cử nhân">Cử nhân</option>
                                                                        <option value="Kỹ sư">Kỹ sư</option>
                                                                        <option value="Thạc sĩ">Thạc sĩ</option>
                                                                        <option value="Tiến sĩ">Tiến sĩ</option>
                                                                    </select>
                                                                    <i class="fs-input-icon fa fa-dollar-sign"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--Start Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="startedDay">
                                                                    Bắt
                                                                    đầu từ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           id="startedDay"
                                                                           data-provide="datepicker"
                                                                           name="startday" type="text" required
                                                                           placeholder="dd/mm/yyyy" />
                                                                    <i class="fs-input-icon fa feather-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--End Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="endedDay">
                                                                    Kết
                                                                    thúc <span>
                                                                        (Để trống nếu đang còn
                                                                        làm)
                                                                    </span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           data-provide="datepicker" id="endedDay"
                                                                           name="endday" type="text"
                                                                           placeholder="dd/dd/yyyy" />
                                                                    <i class="fs-input-icon far fa-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="companydecription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- edit modal-->
                                <div class="modal fade twm-saved-jobs-view" id="EditEducationModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("UpdateCandidateProfileEducation","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title">Học vấn</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <input type="hidden" id="editedid" name="id" />
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateSchoolName"
                                                                       class="form-label">
                                                                    Tên trường <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="name" type="text" required
                                                                           placeholder="School Name"
                                                                           id="editedname" />
                                                                    <i class="fs-input-icon fa fa-school"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-6 col-lg-6 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateMajor"
                                                                       class="form-label">
                                                                    Chuyên ngành <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="major" type="text" required
                                                                           placeholder="Major Name"
                                                                           id="editedmajor" />
                                                                    <i class="fs-input-icon fa fa-school"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-6 col-lg-6 col-md-12">
                                                            <div class="form-group">
                                                                <label for="candidateEducationDegree"
                                                                       class="form-label">
                                                                    Bằng cấp <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <select class="wt-select-box selectpicker" name="degree" required
                                                                            data-live-search="true" title=""
                                                                            id="editeddegree"
                                                                            data-bv-field="size">
                                                                        <option class="bs-title-option"
                                                                                value="">Bằng cấp</option>
                                                                        <option value="Cử nhân">Cử nhân</option>
                                                                        <option value="Kỹ sư">Kỹ sư</option>
                                                                        <option value="Thạc sĩ">Thạc sĩ</option>
                                                                        <option value="Tiến sĩ">Tiến sĩ</option>
                                                                    </select>
                                                                    <i class="fs-input-icon fa fa-dollar-sign"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--Start Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="startedDay">
                                                                    Bắt
                                                                    đầu từ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           id="editedstartday"
                                                                           data-provide="datepicker"
                                                                           name="startday" type="text" required
                                                                           placeholder="dd/mm/yyyy" />
                                                                    <i class="fs-input-icon fa feather-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <!--End Date-->
                                                        <div class="col-md-6">
                                                            <div class="form-group">
                                                                <label class="form-label" for="endedDay">
                                                                    Kết
                                                                    thúc <span>
                                                                        (Để trống nếu đang còn
                                                                        làm)
                                                                    </span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control datepicker"
                                                                           data-provide="datepicker" id="editedendday"
                                                                           name="endday" type="text"
                                                                           placeholder="dd/dd/yyyy" />
                                                                    <i class="fs-input-icon far fa-calendar"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="editeddescription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Certificate -->
                        <div class="tab-pane fade" id="Certificate">
                            <div class="panel-heading wt-panel-heading p-a20 panel-heading-with-btn">
                                <h4 class="panel-tittle m-a0"><i class="fa fa-certificate"></i> Chứng chỉ</h4>
                                <a data-bs-toggle="modal" href="#CertificateModal" role="button" title="Add"
                                   class="site-text-primary">
                                    <span class="fa-2x feather-plus-circle"></span>
                                </a>
                            </div>

                            <div class="panel-body wt-panel-body p-a20">
                                <div class="twm-panel-inner">
                                    <ul class="timeline">
                                        @if (ViewBag.Certificate != null && ViewBag.Certificate.Count > 0)
                                        {
                                            foreach (JobSeekerCertificate i in ViewBag.Certificate)
                                            {
                                                <li class="timeline-item">
                                                    <div class="icon">H</div>
                                                    <div class="content">
                                                        <span class="job-title">@i.CertificateName</span>
                                                        <div class="actions">
                                                            <button class="btn" data-bs-toggle="modal" onclick="loadEditFormCe('@i.CertificateId', '@i.CertificateName', '@i.Organization', '@i.CertificateLink', '@i.Description')"
                                                                    data-bs-target="#EditCertificateModal">
                                                                <i class="feather-edit"></i>
                                                            </button>
                                                            <a href="@Url.Action("DeleteCertificate","Account",new{id = i.CertificateId})">
                                                                <button class="btn" data-bs-toggle="modal"
                                                                        data-bs-target="#delete-education-detail">
                                                                    <i class="feather-trash"></i>
                                                                </button>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="company-name">@i.Organization</div>
                                                    <div class="job-description">
                                                        @i.Description
                                                    </div>
                                                </li>
                                            }
                                        }
                                    </ul>
                                </div>
                            </div>

                            <div class="panel panel-default mb-3">
                                <div class="modal fade twm-saved-jobs-view" id="CertificateModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("AddCandidateProfileCertificate","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title fw-bold">Chứng chỉ</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>

                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateName"
                                                                       class="form-label">
                                                                    Tên chứng chỉ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="name" type="text" required
                                                                           placeholder="Certificate Name"
                                                                           id="certificateName" />
                                                                    <i class="fs-input-icon fa fa-certificate"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateOrganization"
                                                                       class="form-label">
                                                                    Tổ chức <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="organization" type="text" require
                                                                           placeholder="Organization"
                                                                           id="certificateOrganization" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateLink"
                                                                       class="form-label">
                                                                    Link chứng chỉ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="link" type="text" required
                                                                           placeholder="Certificate Link"
                                                                           id="certificateLink" />
                                                                    <i class="fs-input-icon fa fa-link"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="companydecription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- edit modal -->
                                <div class="modal fade twm-saved-jobs-view" id="EditCertificateModal" tabindex="-1">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <form action="@Url.Action("UpdateCandidateProfileCertificate","Account")" method="post">
                                                <div class="modal-header">
                                                    <h3 class="modal-title fw-bold">Chứng chỉ</h3>
                                                    <button type="button" class="btn-close"
                                                            data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <input type="hidden" id="editceid" name="id"/>
                                                <div class="modal-body">
                                                    <div class="row">
                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateName"
                                                                       class="form-label">
                                                                    Tên chứng chỉ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="name" type="text" required
                                                                           placeholder="Certificate Name"
                                                                           id="editcename" />
                                                                    <i class="fs-input-icon fa fa-certificate"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateOrganization"
                                                                       class="form-label">
                                                                    Tổ chức <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="organization" type="text" require
                                                                           placeholder="Organization"
                                                                           id="editceorganization" />
                                                                    <i class="fs-input-icon fa fa-building"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateLink"
                                                                       class="form-label">
                                                                    Link chứng chỉ <span class="required">*</span>
                                                                </label>
                                                                <div class="ls-inputicon-box">
                                                                    <input class="form-control"
                                                                           name="link" type="text" required
                                                                           placeholder="Certificate Link"
                                                                           id="editcelink" />
                                                                    <i class="fs-input-icon fa fa-link"></i>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="col-xl-12 col-lg-12 col-md-12">
                                                            <div class="form-group">
                                                                <label for="certificateDesc"
                                                                       class="form-label">
                                                                    Mô tả <span class="required">*</span>
                                                                </label>
                                                                <textarea id="editcedescription" rows="15" name="description" class="form-control" required></textarea>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>

                                                <div class="modal-footer">
                                                    <button type="button" class="site-button"
                                                            data-bs-dismiss="modal">
                                                        Close
                                                    </button>
                                                    <button type="submit" class="site-button">Save</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>

<script>
    function handleFileUploadd(event) {
        const file = event.target.files[0]; // Lấy file người dùng đã chọn
        if (!file) return;

        // Tạo URL tạm thời cho file đã chọn
        const fileUrl = URL.createObjectURL(file);

        // Hiển thị thẻ iframe và thẻ a
        const iframe = document.getElementById('cviframe');
        const link = document.getElementById('cvlink');
        iframe.style.display = 'block'; // Hiển thị iframe
        link.style.display = 'block';   // Hiển thị thẻ a

        // Cập nhật thẻ iframe để hiển thị file PDF
        iframe.src = fileUrl + '#toolbar=0&view=FitH';

        // Cập nhật thẻ a để mở file mới trong tab mới
        link.href = fileUrl;
    }
    function loadEditFormEx(id, titlename, companyname, startday, endday, description) {
        // Điền dữ liệu vào modal
        document.getElementById('editexid').value = id;
        document.getElementById('editexjobtitle').value = titlename;
        document.getElementById('editexcompanyname').value = companyname;
        document.getElementById('editexstartday').value = startday;
        document.getElementById('editexendday').value = endday;
        document.getElementById('editexdescription').value = description;
    }
    function loadEditFormEd(id, name, major, degree, startday, endday, description) {
        // Điền dữ liệu vào modal
        document.getElementById('editedid').value = id;
        document.getElementById('editedname').value = name;
        document.getElementById('editedmajor').value = major;
        document.getElementById('editeddegree').value = degree;
        document.getElementById('editedstartday').value = startday;
        document.getElementById('editedendday').value = endday;
        document.getElementById('editeddescription').value = description;
    }
    function loadEditFormCe(id, name, organization, link, description) {
        // Điền dữ liệu vào modal
        document.getElementById('editceid').value = id;
        document.getElementById('editcename').value = name;
        document.getElementById('editceorganization').value = organization;
        document.getElementById('editcelink').value = link;
        document.getElementById('editcedescription').value = description;
    }

    var savedWard = document.getElementById("ward").dataset.ward;
    var savedDistrict = document.getElementById("district").dataset.district;
    var savedCity = document.getElementById("city").dataset.city;

    var citis = document.getElementById("city");
    var districts = document.getElementById("district");
    var wards = document.getElementById("ward");
    var Parameter = {
        url: "https://raw.githubusercontent.com/kenzouno1/DiaGioiHanhChinhVN/master/data.json",
        method: "GET",
        responseType: "application/json",
    };
    var promise = axios(Parameter);
    promise.then(function (result) {
        renderCity(result.data);
    });

    function renderCity(data) {
        for (const x of data) {
            // citis.options[citis.options.length] = new Option(x.Name, x.Name);
            var option = new Option(x.Name, x.Name);
            if (x.Name === savedCity) {
                option.selected = true;  // Đặt thuộc tính selected cho ward đã lưu
            }
            citis.options[citis.options.length] = option;
        }
        citis.onchange = function () {
            district.length = 1;
            ward.length = 1;
            if (this.value != "") {
                const result = data.filter(n => n.Name === this.value);

                for (const k of result[0].Districts) {
                    // district.options[district.options.length] = new Option(k.Name, k.Name);
                    var option = new Option(k.Name, k.Name);
                    if (k.Name === savedDistrict) {
                        option.selected = true;  // Đặt thuộc tính selected cho ward đã lưu
                    }
                    districts.options[districts.options.length] = option;
                }
            }
        };
        districts.onchange = function () {
            ward.length = 1;
            const dataCity = data.filter((n) => n.Name === citis.value);
            if (this.value != "") {
                const dataWards = dataCity[0].Districts.filter(n => n.Name === this.value)[0].Wards;

                for (const w of dataWards) {
                    // wards.options[wards.options.length] = new Option(w.Name, w.Name);
                    var option = new Option(w.Name, w.Name);
                    if (w.Name === savedWard) {
                        option.selected = true;  // Đặt thuộc tính selected cho ward đã lưu
                    }
                    wards.options[wards.options.length] = option;
                }
            }
        };
        citis.onchange();
        districts.onchange();
    }
</script>
